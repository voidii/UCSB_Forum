(this.webpackJsonpucsb_web=this.webpackJsonpucsb_web||[]).push([[0],{243:function(e,t,a){e.exports=a(328)},247:function(e,t,a){},257:function(e,t,a){},258:function(e,t,a){},259:function(e,t,a){e.exports=a.p+"static/media/UCSB.83a7d2be.jpg"},270:function(e,t,a){},301:function(e,t,a){},302:function(e,t,a){},328:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(12),l=a.n(r),i=(a(247),a(18)),o=a(19),c=a(82),u=a(21),m=a(20),d=a(46),h=a.n(d),f=(a(257),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).addStyling=function(){return e.props.tab.id===e.props.activeTab?{backgroundColor:"#C0E4FF"}:{backgroundColor:"#87CCFF"}},e}return Object(o.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"tab",style:this.addStyling(),onClick:this.props.changeTab.bind(this,this.props.tab.id)},s.a.createElement("h2",null,this.props.tab.title))}}]),a}(n.Component)),p=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return[{id:1,title:"\u9996\u9875"},{id:2,title:"\u627e\u5ba4\u53cb"},{id:3,title:"\u627e\u8bfe\u53cb"},{id:4,title:"\u627e\u4e8c\u624b"},{id:5,title:"\u987a\u98ce\u8f66"}].map((function(t){return s.a.createElement(f,{tab:t,changeTab:e.props.changeTab,activeTab:e.props.activeTab})}))}}]),a}(n.Component),v=(a(258),function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"content"},s.a.createElement("div",{classname:"words"},s.a.createElement("b",null,"\u6d4b\u8bd5\u7528\u7684\u8d34\u5427"),s.a.createElement("br",null),s.a.createElement("br",null),"\u6d4b\u8bd5\u4ea7\u54c1\uff0c\u60f3\u505a\u6210\u767e\u5ea6\u8d34\u5427\u90a3\u6837\u7684\u6837\u5b50\u7136\u540e\u7ed9\u6211\u4eec\u5b66\u6821\u7684\u5b66\u751f\u7528",s.a.createElement("br",null),s.a.createElement("br",null),"\u4e3b\u8981\u662f\u60f3\u65b9\u4fbf\u5927\u5bb6\uff0cUCSB\u4e07\u4e8b\u5c4b\u4e4b\u7c7b\u7684\u5fae\u4fe1\u53f7\u5176\u5b9e\u5c40\u9650\u6027\u5f88\u5927\uff0c\u4e5f\u4e0d\u591f\u81ea\u7531\uff0c\u65f6\u4e0d\u65f6\u8fd8\u6070\u70c2\u94b1",s.a.createElement("br",null),s.a.createElement("br",null),"\u8fd8\u662f\u60f3\u7528\u8fd9\u79cd\u8d34\u5427\u7684\u5f62\u5f0f\u5927\u5bb6\u53ef\u4ee5\u81ea\u7531\u53d1\u5e16\uff0c\u611f\u89c9\u4f1a\u65b9\u4fbf\u5f88\u591a\u5f88\u591a")),s.a.createElement("div",{classname:"home"},s.a.createElement("img",{classname:"image",src:a(259),style:{width:"40%",float:"right"}})))}}]),n}(n.Component)),g=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return s.a.createElement("div",null,console.log(this.props.id_for_message))}}]),a}(n.Component),b=a(34),E=a.n(b),y=(a(270),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).writeUserData=function(){b.database().ref("/message").set(e.state.messages),console.log("DATA SAVED")},e.getUserData=function(){b.database().ref("/message").on("value",(function(t){var a=t.val();e.setState({messages:a})})),console.log("DATA RETRIEVED")},e.openModal=function(t){e.setState({showModal:!0,id_for_message:t.id_for_message})},e.closeModal=function(){e.setState({showModal:!1,id_for_message:""})},e.handleSubmit=function(t){t.preventDefault();var a=e.refs.name.value,n=e.refs.message.value,s=e.props.uid,r=e.refs.des.value;console.log(s);var l=e.refs.Email.value,i=(new Date).toLocaleString(),o=e.refs.warning;if(!(a.length<20&&a.length>5))return o.innerHTML="*Name must be longer than 5 characters, less than 20",null;if(!(r.length<100||0===r.length))return o.innerHTML="* Describption must be less than 100 character",null;if(!(n.length<500&&n.length>15))return o.innerHTML="* Message must be longer than 15 characters, less than 500 characters",null;if(o.innerHTML="",s&&a&&n){var c=(new Date).getTime().toString()+s,u=e.state.messages;u.push({id_for_message:c,uid:s,name:a,message:n,date:i,des:r,Email:l}),e.setState({messages:u})}e.refs.name.value="",e.refs.message.value="",e.refs.des.value="",e.refs.Email.value=""},e.removeData=function(t){var a=e.state.messages.filter((function(e){return e.date!==t.date}));e.setState({messages:a})},e.updateData=function(t){e.refs.name.value=t.name,e.refs.message.value=t.message},e.state={messages:[],showModal:!1,id_for_message:""},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getUserData()}},{key:"componentDidUpdate",value:function(e,t){t!==this.state&&this.writeUserData()}},{key:"render",value:function(){var e=this,t=this.state.messages;return s.a.createElement("div",{className:"comment-box"},s.a.createElement("div",{className:"comment"},s.a.createElement("div",null,t.map((function(t){return s.a.createElement("div",null,s.a.createElement("div",{className:"editContent"},s.a.createElement("div",{className:"content",href:"#",onClick:function(){return e.openModal(t)}},t.message),s.a.createElement("div",{className:"metadata"},s.a.createElement("div",{className:"author"},t.name),s.a.createElement("div",{className:"author"},t.des),s.a.createElement("div",{className:"date"},t.date),s.a.createElement("a",{className:"option",href:"#",onClick:function(){return e.removeData(t)}},"Delete"),s.a.createElement("a",{className:"option",href:"#",onClick:function(){return e.updateData(t)}},"Edit"))))})))),s.a.createElement("div",{className:"comment-box"},s.a.createElement("div",{className:"col-xl-12"},s.a.createElement("form",{className:"submitform",onSubmit:this.handleSubmit},s.a.createElement("span",{className:"warning",ref:"warning"}),s.a.createElement("input",{type:"hidden",ref:"uid"}),s.a.createElement("div",{className:"form-row"},s.a.createElement("input",{type:"text",placeholder:"Name",ref:"name"})),s.a.createElement("div",{className:"form-row"},s.a.createElement("input",{type:"text",placeholder:"Description",ref:"des"})),s.a.createElement("div",{className:"form-row"},s.a.createElement("textarea",{placeholder:"Message",ref:"message"})),s.a.createElement("div",{className:"form-row"},s.a.createElement("input",{type:"text",placeholder:"Email",ref:"Email"})),s.a.createElement("div",{className:"form-row"},s.a.createElement("button",null,"Post"))))),s.a.createElement(h.a,{isOpen:this.state.showModal,overlayClassName:"overlay",className:"modal",onAfterOpen:this.handleAfterOpenFunc,shouldCloseOnOverlayClick:!0},s.a.createElement(g,{id_for_message:this.state.id_for_message}),s.a.createElement("button",{onClick:this.closeModal},"\u5173\u95ed\u6a21\u6001\u6846")))}}]),a}(n.Component)),C=a(363),w=a(175),O=a.n(w),S=a(181),k=a(110),j=a(358),D=a(364),M=a(359),N=a(366),A=a(360),x=a(361),T=a(103),U=a(365),F=a(362),I=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this)).renderBubble=function(e){return s.a.createElement(k.Bubble,Object.assign({},e,{wrapperStyle:{left:{backgroundColor:"#f0f0f0"}}}))},n.state={messages:[{id:1,text:"My message",createdAt:new Date(Date.UTC(2016,5,11,17,20,0)),user:{id:2,name:"React",avatar:"https://facebook.github.io/react/img/logo_og.png"},image:"http://5b0988e595225.cdn.sohucs.com/images/20190311/6918fe35e3424cc99fd759e246397af9.jpeg"}],user:{id:e.uid},isAuthenticated:!0},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.loadMessages()}},{key:"loadMessages",value:function(){var e=this;E.a.database().ref("/"+this.props.title+"/messages/").on("child_added",(function(t){var a=t.val();a.id=t.key,a.createdAt&&(a.createdAt=new Date(a.createdAt));var n=e.state.messages;n.push(a),e.setState({messages:n})}))}},{key:"onSend",value:function(e){console.log(e);var t,a=Object(S.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.createdAt=JSON.stringify(new Date).replace(/['"]+/g,""),this.saveMessage(n)}}catch(s){a.e(s)}finally{a.f()}}},{key:"saveMessage",value:function(e){return E.a.database().ref("/"+this.props.title+"/messages").push(e).catch((function(e){console.error("Error saving message to Database:",e)}))}},{key:"renderSignOutButton",value:function(){return this.state.isAuthenticated?s.a.createElement(j.a,null,"Sign out"):null}},{key:"renderChat",value:function(){var e=this;return s.a.createElement(k.GiftedChat,{user:this.state.user,messages:this.state.messages.slice().reverse(),onSend:function(t){return e.onSend(t)},scrollToBottom:!0,renderBubble:this.renderBubble})}},{key:"renderChannels",value:function(){return s.a.createElement(M.a,null,s.a.createElement(N.a,{button:!0},s.a.createElement(A.a,null,s.a.createElement(D.a,null,"D")),s.a.createElement(x.a,{primary:"Default"})))}},{key:"renderChannelsHeader",value:function(){return s.a.createElement(U.a,{position:"static",color:"default"},s.a.createElement(F.a,null,s.a.createElement(T.a,{variant:"h6",color:"inherit"},"Channels")))}},{key:"renderChatHeader",value:function(){return s.a.createElement(U.a,{position:"static",color:"default"},s.a.createElement(F.a,null,s.a.createElement(T.a,{variant:"h6",color:"inherit"},this.props.title)))}},{key:"renderSettingsHeader",value:function(){return s.a.createElement(U.a,{position:"static",color:"default"},s.a.createElement(F.a,null,s.a.createElement(T.a,{variant:"h6",color:"inherit"},"Settings")))}},{key:"render",value:function(){return s.a.createElement("div",{style:_.container},s.a.createElement("div",{style:_.chat},this.renderChatHeader(),this.renderChat()),s.a.createElement("div",{style:_.settings},this.renderSettingsHeader(),this.renderSignOutButton()))}}]),a}(n.Component),_={container:{flex:1,display:"flex",flexDirection:"row",height:"100%"},chat:{display:"flex",flex:3,flexDirection:"column",borderWidth:"1px",borderColor:"#ccc",borderRightStyle:"solid",borderLeftStyle:"solid"},settings:{display:"flex",flex:1,flexDirection:"column"}},W=I,B=(a(301),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).addStyling=function(){return e.props.class.title===e.props.activeClass?{backgroundColor:"#C0E4FF"}:{backgroundColor:"#87CCFF"}},e}return Object(o.a)(a,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"list",style:this.addStyling(),onClick:this.props.changeClass.bind(this,this.props.class.title)},s.a.createElement("h2",null,this.props.class.title)),this.props.class.title===this.props.activeClass&&s.a.createElement("div",{className:"screen"},s.a.createElement("div",{className:"sub"},s.a.createElement(W,{uid:this.props.uid,title:this.props.class.title}))))}}]),a}(n.Component)),R=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={classes:[]},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getClassesData()}},{key:"writeClassesData",value:function(){E.a.database().ref("/UCSB/Classes").set(this.state.classes),console.log("DATA SAVED")}},{key:"getClassesData",value:function(){var e=this;E.a.database().ref("/UCSB/Classes").on("value",(function(t){var a=t.val();e.setState({classes:a})}))}},{key:"render",value:function(){var e=this;return this.state.classes.map((function(t){return s.a.createElement(B,{class:t,uid:e.props.uid,changeClass:e.props.changeClass,activeClass:e.props.activeClass})}))}}]),a}(n.Component),L=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).writeUserData=function(){b.database().ref("/UCSB/Classes").set(e.state.title)},e.getUserData=function(){b.database().ref("/UCSB/Classes").on("value",(function(t){var a=t.val();e.setState({title:a})})),console.log("DATA RETRIEVED")},e.handleSubmit=function(t){var a=e.refs.title.value.toUpperCase();console.log(a),console.log(e.state.title);var n=e.state.title;n.push({title:a}),e.setState({curClass:n})},e.state={title:""},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getUserData()}},{key:"componentDidUpdate",value:function(e,t){t!==this.state&&this.writeUserData()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("input",{type:"text",width:"200px",height:"30px",ref:"title"}),s.a.createElement(j.a,{variant:"contained",color:"primary",onClick:function(){e.handleSubmit()}},"ADD CLASS")))}}]),a}(n.Component),P=(a(302),{margin:0,top:"auto",right:20,bottom:20,left:"auto",position:"fixed"}),G=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this)).openModal=function(){n.setState({showModal:!0})},n.closeModal=function(){n.setState({showModal:!1}),console.log(n.state.uid)},n.state={activeClass:0,uid:e.uid,showModal:!1},n.changeClass=function(e){n.setState({activeClass:e})},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,""!==this.props.uid&&s.a.createElement(C.a,{color:"primary","aria-label":"add",onClick:function(){return e.openModal()},style:P},s.a.createElement(O.a,null)),s.a.createElement("div",null,s.a.createElement(R,{uid:this.props.uid,changeClass:this.changeClass,activeClass:this.state.activeClass})),s.a.createElement(h.a,{isOpen:this.state.showModal,overlayClassName:"overlay",className:"modal",onAfterOpen:this.handleAfterOpenFunc},s.a.createElement(L,null),s.a.createElement("button",{onClick:this.closeModal},"\u5173\u95ed\u6a21\u6001\u6846")))}}]),a}(n.Component),H=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).displayContent=function(){return 1===e.props.activeTab?s.a.createElement(v,null):2===e.props.activeTab?s.a.createElement(y,{uid:e.props.uid}):3===e.props.activeTab?s.a.createElement(G,{uid:e.props.uid}):(e.props.activeTab,s.a.createElement(v,null))},e}return Object(o.a)(a,[{key:"render",value:function(){return this.displayContent()}}]),a}(n.Component),z=a(176),V=a.n(z),J={apiKey:"AIzaSyCvDMG6RU1O0rkeXMsRoCkHf5zDf3CqC50",authDomain:"ucsbforum.firebaseapp.com",databaseURL:"https://ucsbforum.firebaseio.com"},q=b.initializeApp(J),K=(V.a.createClass(q.database()),new b.auth.GoogleAuthProvider),X=a(70),Y={width:"90%",maxWidth:"315px",margin:"20px auto",padding:"10px",border:"1px solid #ddd",borderRadius:"5px"},$=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).openModal=function(){e.setState({showModal:!0})},e.closeModal=function(){e.setState({showModal:!1}),console.log(e.state.uid)},e.handleAfterOpenFunc=function(){console.log("open~")},e.handleAfterCloseFunc=function(){console.log("close~")},e.openRef=function(){console.log(e.overlayRef),console.log(e.contentRef)},e.getParent=function(){return document.querySelector("#App")},e.Logout=function(){q.auth().signOut().then((function(t){e.setState({authenicated:!1,uid:""})}))},e.authWithGoogle=e.authWithGoogle.bind(Object(c.a)(e)),e.authWithEmailPassward=e.authWithEmailPassward.bind(Object(c.a)(e)),e.state={activeTab:1,showModal:!1,authenicated:!1,uid:"",redirect:!1},e.changeTab=function(t){e.setState({activeTab:t})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.removeAuthListener=q.auth().onAuthStateChanged((function(t){t?(e.setState({authenicated:!0,uid:t.uid}),console.log(t.uid)):e.setState({authenicated:!1,uid:""})}))}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"authWithGoogle",value:function(){var e=this;console.log("google"),q.auth().signInWithPopup(K).then((function(t,a){a?e.toaster.show({intent:X.Intent.DANGER,message:"unable to sign in with google"}):e.setState({redirect:!0})}))}},{key:"authWithEmailPassward",value:function(e){var t=this;e.preventDefault(),console.table([{email:this.emailInput.value,password:this.passwordInput.value}]);var a=this.emailInput.value,n=this.passwordInput.value;q.auth().fetchSignInMethodsForEmail(a).then((function(e){return 0===e.length?q.auth().createUserWithEmailAndPassword(a,n):-1!==e.indexOf("password")?q.auth().signInWithEmailAndPassword(a,n):(t.loginForm.reset(),void t.toaster.show({intent:X.Intent.WARNING,message:"Try other log in"}))})).then((function(e){e.user.uid&&e.user.email&&(t.loginForm.reset(),t.setState({redirect:!0,uid:e.user.uid}))})).catch((function(e){t.toaster.show({intent:X.Intent.DANGER,message:e.mesaage})}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{className:"header"},s.a.createElement("h1",null,"UCSB\u5c0f\u8d34\u5427"),!this.state.authenicated&&s.a.createElement("h3",{onClick:this.openModal},"Login"),this.state.authenicated&&s.a.createElement("h3",{onClick:this.Logout},"Logout")),s.a.createElement("div",{className:"navbar"},s.a.createElement(p,{changeTab:this.changeTab,activeTab:this.state.activeTab})),s.a.createElement("div",{className:"mainbody"},s.a.createElement(H,{activeTab:this.state.activeTab,uid:this.state.uid})),s.a.createElement(h.a,{isOpen:this.state.showModal,overlayClassName:"overlay",className:"modal",onAfterOpen:this.handleAfterOpenFunc,shouldCloseOnOverlayClick:!0},!this.state.redirect&&s.a.createElement("div",{style:Y},s.a.createElement(X.Toaster,{ref:function(t){e.toaster=t}}),s.a.createElement("button",{style:{width:"100%",backgroundColor:"#6bc4ff",color:"white"},class:"btn-secondary",onClick:function(){e.authWithGoogle()}},"Sign In With Google"),s.a.createElement("hr",null),s.a.createElement("form",{onSubmit:function(t){e.authWithEmailPassward(t)},ref:function(t){e.loginForm=t}},s.a.createElement("div",null,s.a.createElement("h5",null,"Note"),"If you don't have an account, this form will create your account."),s.a.createElement("hr",null),s.a.createElement("label",null,s.a.createElement("b",null,"Email"),s.a.createElement("input",{style:{width:"100%"},className:"input",name:"email",type:"email",ref:function(t){e.emailInput=t},placeholder:"Email"})),s.a.createElement("label",null,s.a.createElement("b",null,"Passward"),s.a.createElement("input",{style:{width:"100%"},className:"input",name:"passward",type:"passward",ref:function(t){e.passwordInput=t},placeholder:"Passward"})),s.a.createElement("input",{style:{width:"100%",backgroundColor:"#6bc4ff",color:"white"},type:"submit",value:"Log In"}))),this.state.redirect&&s.a.createElement("div",{style:Y},s.a.createElement("div",{style:{fontSize:"xx-large",fontFamily:"cursive",float:"center"}},"You"),s.a.createElement("div",{style:{fontSize:"xx-large",fontFamily:"cursive",float:"center"}},"have"),s.a.createElement("div",{style:{fontSize:"xx-large",fontFamily:"cursive",float:"center"}},"successfully"),s.a.createElement("div",{style:{fontSize:"xx-large",fontFamily:"cursive",float:"center"}},"logged in!")),s.a.createElement("button",{onClick:this.closeModal},"\u5173\u95ed\u6a21\u6001\u6846")))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[243,1,2]]]);
//# sourceMappingURL=main.05431598.chunk.js.map